function addToBasket(e){var t=$("#email__encs")[0].selectionStart,n=$("#email__encs")[0].selectionEnd;$("#email__encs").val($("#email__encs").val()+e+", \n"),$("#email__encs")[0].selectionStart=t,$("#email__encs")[0].selectionEnd=n}function show_support_table(e){$(e).show()}function hide_support_table(e){$(e).hide()}function highlightbody(e,t,n,a){setTimeout(function(){$("#term__body").css("backgroundColor","hsl("+n+","+a+"%,"+e+"%)")},t)}function lightenTable(o,c){$("#term__body").css("backgroundColor","hsl("+o+", "+c+"%, 74%)"),new Promise(function(e,t){for(var n=100,a=74;a<=100;a+=.1)highlightbody(a,n+=2,o,c);e(a)}).then(function(e){setTimeout(function(){$("#term__body").css("backgroundColor","rgba(0,0,0,0)")},1e3)}).catch(function(){})}function isNumeric(e){var t=[];t.push(8),t.push(13),t.push(46);var n=e.which?e.which:e.keyCode,a=n<=57||-1!==t.indexOf(n);return document.getElementById("error").style.display=a?"none":"inline",a}function buildtable(e,t,n,a){var o=document.getElementById(t),c=document.createElement("div"),F=document.createDocumentFragment(),H=0;c.className="row product__line",c.className+=n?" even":" odd",e.forEach(function(e){var t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h2"),o=document.createElement("i"),c=document.createElement("button"),r=document.createElement("div");r.className="product__inner",n.className="product__overlay",a.className="product__overlay__title",o.className="glyphicon glyphicon-ok btn btn-success";var s=document.createElement("p"),d=document.createElement("h3"),i=document.createElement("p"),l=document.createElement("p");t.className=0===H?"product__wrap term__info":1===H?"product__wrap product__found":"product__wrap product__equivalence",0<H?(s.className="term__data term__ref__data",d.className="term__data term__vnd__data",i.className="term__data term__pvp__data",l.className="term__data term__stk__data"):s.className="term__info_desc";var m=e[0],u=document.createTextNode(m),_=document.createElement("span");_.className="term__vendor",_.appendChild(u);var p=document.createElement("span"),h="";""!==e[1]&&(h=e[1]);var g=document.createTextNode(h);p.className="term__text__query",p.appendChild(g);var v="";""!==e[4]&&(v=" ("+e[4]+")");var f=document.createTextNode(v),b=document.createElement("span");b.appendChild(f),b.className="term__letter";var y="";""!==e[6]&&(y+=e[6]+"%");var C=document.createTextNode(y),N=document.createElement("span");N.appendChild(C),N.className="term__discount";var E=e[7];s.appendChild(p),r.appendChild(_),r.appendChild(s);var x="";""!==e[2]&&(x=e[2]);var k=document.createElement("span"),j=document.createTextNode(x);if(k.className="term__text__pvp",k.appendChild(j),0<H&&s.appendChild(b),0<H){var T=document.createTextNode("( PVP )"),$=document.createElement("span");$.appendChild(T),$.className="term__audience",k.appendChild($)}0<H&&k.appendChild(N),r.appendChild(k);var w,B="",I="",Q=e[3].replace(",","."),D=!1;if("Stock"===Q)B=Q,I="term__text__result";else if(null!==e[5]){var L="term__avail btn glyphicon ";1<=~~(w=Q-e[5].replace(",","."))&&1<=~~Q?(I="glyphicon-ok btn-success",D=!0):~~w<1&&1<=~~Q?(D=!1,I="glyphicon-remove btn-warning"):~~w<1&&~~Q<1&&(D=!1,I="glyphicon-remove btn-danger")}else 1<~~Q?(D=!0,I="glyphicon-ok btn-success"):1==~~Q?(D=!1,I="glyphicon-remove btn-warning"):~~Q<1&&(D=!1,I="glyphicon-remove btn-danger");var S=document.createElement("span"),q=document.createTextNode(B);if(S.className=L+I,S.appendChild(q),D){var A=document.createTextNode("Adicionar");c.appendChild(A),c.className="term__cart term__qty__data js-add__cart"}else{A=document.createTextNode("Pedir Prazo entrega");c.className="term__cart term__not-available js-add__cart js-ask-avail",c.appendChild(A)}c.dataset.product_sku=h,c.dataset.product_name=E,c.appendChild(S),r.appendChild(c),t.appendChild(r);var P=document.createTextNode("Adicionado!");a.appendChild(P),n.appendChild(a),n.appendChild(o),t.appendChild(n),F.appendChild(t),H++}),c.appendChild(F),o.appendChild(c)}function toggle_cart(){$("#email__form").toggle(200,function(){$(this).toggleClass("active"),$(".js-btn-toggle-cart").toggleClass("js-show-cart-mode")})}function toggle_lists(){$("#list__block").toggle(200,function(){$(this).toggleClass("active"),$(".js-btn-toggle-lists").toggleClass("js-show-lists-mode")})}function search_term(){var e={action:"get_terms",term_text:jQuery("#term__text").val(),client_code:jQuery("#client__code").val(),client_id:jQuery("#client__id").val(),page_id:jQuery("#page_id").val(),getterms_nonce:stockAjax.gettermsNonce};$("#term__body").empty(),jQuery.post(stockAjax.ajaxurl,e,function(t){var e={},n=!1,a=!1;if(""===t||0===t||!t.match){return e.textContent="",buildtable([],"term__body",a=!1),void lightenTable(0,100)}if(t.match&&(e.textContent="",n=a=!1,Object.keys(t.match).map(function(e){buildtable(t.match[e],"term__body",a,n),a=!a,n=!n,lightenTable(64,68)})),jQuery("#term__text").val()&&document.getElementById("term__body").innerHTML){var o,c,r,s,d=document.getElementById("term__latest__body"),i=document.createDocumentFragment(),l=jQuery("#term__body .term__data span"),m=document.getElementById("term__text").value;o=[],c=[],r=[],s=[],l.each(function(e,t){switch(t.className){case"term__text__query":o.push(t);break;case"term__text__pvp":c.push(t);break;case"glyphicon glyphicon-ok btn btn-success":case"glyphicon glyphicon-remove btn btn-danger":case"glyphicon glyphicon-remove btn btn-warning":r.push(t),s.push(t)}});for(var u=o.length,_=0;_<u/9;){var p=document.createElement("tr"),h=document.createElement("td"),g=document.createTextNode(m);h.appendChild(g),p.appendChild(h);for(var v=0+9*_;v<0+9*_;v++){var f=document.createElement("td"),b=document.createTextNode(o[v].innerHTML),y=document.createElement("span");if(y.className=o[v].className,y.appendChild(b),f.appendChild(y),f.className="term__data",void 0!==r[v]){var C=document.createElement("span");C.className=r[v].className+" btn-xs",f.appendChild(C)}if(void 0!==c[v]){var N=document.createTextNode(c[v].innerHTML),E=document.createElement("span");E.className=c[v].className+" term__text__result",E.appendChild(N),f.appendChild(E)}p.appendChild(f)}i.appendChild(p),_++}$(d).prepend(i)}document.getElementById("term__body").scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},"json")}!function(c){"use strict";var o=function(e,t){this.$element=c(e),this.options=c.extend({},o.DEFAULTS,t),this.isLoading=!1};function n(a){return this.each(function(){var e=c(this),t=e.data("bs.button"),n="object"==typeof a&&a;t||e.data("bs.button",t=new o(this,n)),"toggle"==a?t.toggle():a&&t.setState(a)})}o.VERSION="3.2.0",o.DEFAULTS={loadingText:"loading..."},o.prototype.setState=function(e){var t="disabled",n=this.$element,a=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[a]()),n[a](null==o[e]?this.options[e]:o[e]),setTimeout(c.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(t).attr(t,t)):this.isLoading&&(this.isLoading=!1,n.removeClass(t).removeAttr(t))},this),0)},o.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}e&&this.$element.toggleClass("active")};var e=c.fn.button;c.fn.button=n,c.fn.button.Constructor=o,c.fn.button.noConflict=function(){return c.fn.button=e,this},c(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=c(e.target);t.hasClass("btn")||(t=t.closest(".btn")),n.call(t,"toggle"),e.preventDefault()})}(jQuery);"use strict";!function(o){var c={common:{init:function(){}},page_template_template_csv:{init:function(){jQuery(document).ready(function(){o("#term__qt").bind("keydown",function(e){return isNumeric(e)}),o(document).on("click",".js-btn-toggle-cart",function(e){e.preventDefault(),toggle_cart()}),o(document).on("click",".js-btn-toggle-lists",function(e){e.preventDefault(),toggle_lists()}),o(document).on("click","#btn-submit-search",function(e){e.preventDefault(),search_term(function(){})}),o(".js-show-support").on("click",function(e){hide_support_table(".js-support-list"),show_support_table("."+o(this).data("tableid"))}),o(".js-hide-support").on("click",function(e){hide_support_table(".js-support-list")}),o(document).on("click",".js-add__cart",function(){var e=o(this),t=e.data("product_sku"),n=e.data("product_name"),a="";o(this).hasClass("js-ask-avail")&&(a=" - Pedir Prazo de Entrega"),addToBasket(t+" "+n+a),o(this).parent().parent().find(".product__overlay").css({transform:" translateY(0px)",opacity:"1",transition:"all ease-in-out .45s"}).delay(1500).queue(function(){o(this).css({transform:"translateY(-500px)",opacity:"0",transition:"all ease-in-out .45s"}).dequeue()})}),jQuery(window).keydown(function(e){if(13===e.keyCode&&document.getElementById("term__text")===document.activeElement)return e.preventDefault(),search_term(),!1}),null!=document.getElementById("term__text")&&document.getElementById("term__text").focus()})}}},n={fire:function(e,t,n){var a=c;t=void 0===t?"init":t,""!==e&&a[e]&&"function"==typeof a[e][t]&&a[e][t](n)},loadEvents:function(){n.fire("common"),o.each(document.body.className.replace(/-/g,"_").split(/\s+/),function(e,t){n.fire(t)})}};o(document).ready(n.loadEvents)}(jQuery);